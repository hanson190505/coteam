(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc4cf72c"],{"0323":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addproductType}},[t._v("新增类别")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addproductData}},[t._v("新增产品")])],1)],1),a("Product-table",{on:{checkproductData:t.checkproductData}}),a("add-product",{ref:"addProductComponent",attrs:{addProductData:t.productsData,addProductVisble:t.addProductVisible},on:{closeAddProductDialog:t.closeAddProductDialog}}),a("addProduct-type",{attrs:{visible:t.addproductTypeVisible},on:{closeAddproductType:t.closeAddproductType}})],1)},o=[],i=(a("4160"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{},attrs:{data:t.productsData,border:"","show-summary":"","highlight-current-row":"","row-class-name":t.tableRowClassName,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{label:"产品类别",align:"center",width:"80",fiexd:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sub_type))])]}}])}),a("el-table-column",{attrs:{label:"seo标题",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.seo_title,callback:function(a){t.$set(e.row,"seo_title",a)},expression:"scope.row.seo_title"}})]}}])}),a("el-table-column",{attrs:{label:"seo描述",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.seo_desc,callback:function(a){t.$set(e.row,"seo_desc",a)},expression:"scope.row.seo_desc"}})]}}])}),a("el-table-column",{attrs:{label:"添加日期",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pub_date))])]}}])}),a("el-table-column",{attrs:{label:"编号",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pro_number))])]}}])}),a("el-table-column",{attrs:{label:"名称",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pro_name))])]}}])}),a("el-table-column",{attrs:{label:"尺寸",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pro_size))])]}}])}),a("el-table-column",{attrs:{label:"重量(g)",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.pro_weight))])]}}])}),a("el-table-column",{attrs:{label:"型号",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pro_model))])]}}])}),a("el-table-column",{attrs:{label:"包装",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pro_pack))])]}}])}),a("el-table-column",{attrs:{width:"150",label:"颜色"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("add-product-color",{attrs:{parentProColor:e,addColorBtn:t.childAddColorBtn=!1},on:{getProColor:t.handleSelect,delProColor:t.delProColor}})]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleCheck(e.row)}}},[t._v("查看")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleSave(e.row)}}},[t._v("保存")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("pagi-nation",{attrs:{getDataTotal:t.dataTotal},on:{pagination:t.pagination}})],1)}),l=[],r=(a("c975"),a("a434"),a("ac1f"),a("1276"),a("4c79")),c=a("2822"),s=a("d2c0"),u=a("6681"),d=a("b59b"),p={name:"ProductTable",components:{addProductColor:c["a"],pagiNation:s["a"],backendSearchVue:d["a"],dateSearch:u["a"]},data:function(){return{productsData:[],productTypeData:[],childAddColorBtn:!0,loading:!1,dataTotal:0}},methods:{delProColor:function(t,e){var a="";this.productsData[e].pro_color.split("|").forEach((function(e,n){-1===e.indexOf(t)&&""!==e&&(a+=e+"|")})),this.productsData[e].pro_color=a},handleSelect:function(t,e){""===this.productsData[e].pro_color?this.productsData[e].pro_color=JSON.stringify(t)+"|":this.productsData[e].pro_color+=JSON.stringify(t)+"|"},tableRowClassName:function(){return""},pagination:function(t){var e=this;t||(t={page:1,page_size:10}),Object(r["b"])(t).then((function(t){e.productsData=t.data.results,e.loading=!1,e.dataTotal=t.data.count}))},handleCheck:function(t){this.$emit("checkproductData",t)},handleSave:function(t){var e=this;Object(r["d"])(t.id,t).then((function(t){e.$notify({message:"保存成功",type:"success"})})).catch((function(t){e.$notify.error({message:"保存失败"})}))},handleDel:function(t,e){var a=this;e.hasOwnProperty("id")?this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.productsData.splice(t,1),Object(r["d"])(e.id,{is_delete:1}).then((function(t){a.$message({type:"success",message:"删除成功!"})}))})).catch((function(){a.$message({type:"info",message:"删除失败!"})})):this.$confirm("数据未保存,确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.productsData.splice(t,1),a.$message({type:"success",message:"删除成功!"})})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))}},created:function(){this.pagination()}},f=p,h=a("2877"),m=Object(h["a"])(f,i,l,!1,null,"145bd8de",null),b=m.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{},attrs:{data:t.productsTypeData,border:"","show-summary":"","highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{label:"产品类别",align:"center",width:"150",fiexd:""},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":t.selectTest},model:{value:e.row.parent_category,callback:function(a){t.$set(e.row,"parent_category",a)},expression:"scope.row.parent_category"}},t._l(t.productTypeDataSelect,(function(t){return a("el-option",{key:t.id,attrs:{label:t.category+"-"+t.parent_category,value:t.id}})})),1):a("span",[t._v(t._s(e.row.parent_category+"-"+e.row.category))])]}}])}),a("el-table-column",{attrs:{label:"产品子类",align:"center",width:"120",fiexd:""},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-input",{model:{value:e.row.category,callback:function(a){t.$set(e.row,"category",a)},expression:"scope.row.category"}}):a("span",[t._v(t._s(e.row.category))])]}}])}),a("el-table-column",{attrs:{label:"提交日期",align:"center",width:"120",fiexd:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pub_date))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleAdd()}}},[t._v("新增")]),1===e.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleSave(e.row)}}},[t._v("保存")]):a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleChange(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleAdd()}}},[t._v("新增")]),a("pagi-nation",{attrs:{getDataTotal:t.dataTotal},on:{pagination:t.pagination}})],1)},_=[];a("d3b7");var v={data:function(){return{productsTypeData:[],productTypeDataSelect:[],dataTotal:0,loading:!0}},props:{visible:{type:Boolean,default:!1}},components:{pagiNation:s["a"]},methods:{selectTest:function(t){var e=this;!0===t&&Object(r["a"])().then((function(t){e.productTypeDataSelect=t.data.results,console.log(t.data)}))},pagination:function(t){var e=this;t||(t={page:1,page_size:10}),Object(r["a"])(t).then((function(t){t.data.results.forEach((function(t){t.status=0})),e.productsTypeData=t.data.results,e.loading=!1,e.dataTotal=t.data.count}))},handleAdd:function(){this.productsTypeData.push({category:"",sub_type:"",status:1})},handleSubmit:function(t){var e=this;Object(r["e"])(t).then((function(a){e.$notify({message:"提交成功",type:"success"}),t.status=0})).catch((function(t){e.$notify.error({message:"提交失败"})}))},handleChange:function(t){t.status=1},handleSave:function(t){var e=this;t.id?Object(r["c"])(t.id,t).then((function(a){e.$notify({message:"修改成功",type:"success"}),t.status=0})).catch((function(t){e.$notify.error({message:"修改失败"})})):this.handleSubmit(t)},handleDel:function(t,e){var a=this;e.hasOwnProperty("id")?this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(t),console.log(e),a.productsTypeData.splice(t,1),Object(r["c"])(e.id,{is_delete:1}).then((function(t){a.$message({type:"success",message:"删除成功!"})}))})).catch((function(){a.$message({type:"info",message:"删除失败!"})})):this.$confirm("数据未保存,确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.productsTypeData.splice(t,1),a.$message({type:"success",message:"删除成功!"})})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleClose:function(t){var e=this;new Promise((function(t,a){e.$emit("closeAddproductType"),t()})).then((function(e){t()}))}},created:function(){this.pagination()}},y=v,D=Object(h["a"])(y,g,_,!1,null,null,null),w=D.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"",visible:t.addProductVisble,width:"95%","before-close":t.close},on:{"update:visible":function(e){t.addProductVisble=e}}},[a("el-form",{ref:"addProductData",attrs:{model:t.addProductData,"label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"类别"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":t.selectTest},model:{value:t.addProductData.sub_type,callback:function(e){t.$set(t.addProductData,"sub_type",e)},expression:"addProductData.sub_type"}},t._l(t.productTypeData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.parent_category+"--"+t.category,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{model:{value:t.addProductData.pro_number,callback:function(e){t.$set(t.addProductData,"pro_number",e)},expression:"addProductData.pro_number"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.addProductData.pro_name,callback:function(e){t.$set(t.addProductData,"pro_name",e)},expression:"addProductData.pro_name"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"尺寸"}},[a("el-input",{model:{value:t.addProductData.pro_size,callback:function(e){t.$set(t.addProductData,"pro_size",e)},expression:"addProductData.pro_size"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"重量(g)"}},[a("el-input",{model:{value:t.addProductData.pro_weight,callback:function(e){t.$set(t.addProductData,"pro_weight",e)},expression:"addProductData.pro_weight"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{model:{value:t.addProductData.pro_model,callback:function(e){t.$set(t.addProductData,"pro_model",e)},expression:"addProductData.pro_model"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"包装"}},[a("el-input",{model:{value:t.addProductData.pro_pack,callback:function(e){t.$set(t.addProductData,"pro_pack",e)},expression:"addProductData.pro_pack"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"单价"}},[a("el-input",{model:{value:t.addProductData.pro_price,callback:function(e){t.$set(t.addProductData,"pro_price",e)},expression:"addProductData.pro_price"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"新品"}},[a("el-select",{model:{value:t.addProductData.is_new,callback:function(e){t.$set(t.addProductData,"is_new",e)},expression:"addProductData.is_new"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"热销"}},[a("el-select",{model:{value:t.addProductData.is_hot,callback:function(e){t.$set(t.addProductData,"is_hot",e)},expression:"addProductData.is_hot"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"折扣"}},[a("el-select",{model:{value:t.addProductData.is_discount,callback:function(e){t.$set(t.addProductData,"is_discount",e)},expression:"addProductData.is_discount"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"折扣数"}},[a("el-input",{model:{value:t.addProductData.pro_discount,callback:function(e){t.$set(t.addProductData,"pro_discount",e)},expression:"addProductData.pro_discount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"seo标题"}},[a("el-input",{model:{value:t.addProductData.seo_title,callback:function(e){t.$set(t.addProductData,"seo_title",e)},expression:"addProductData.seo_title"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"seo描述"}},[a("el-input",{model:{value:t.addProductData.seo_desc,callback:function(e){t.$set(t.addProductData,"seo_desc",e)},expression:"addProductData.seo_desc"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"颜色"}},[a("add-product-color",{attrs:{ProductColor:t.addProductData,addColorBtn:t.childAddColorBtn=!1},on:{getProColor:t.handleSelect,delProColor:t.delProColor}})],1)],1)],1),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.selectPic}},[t._v("选择图片")]),a("el-col",{attrs:{span:18}},[a("upload-pic",{attrs:{number:t.addProductData.pro_number,owner:"product"},on:{sendPicUrl:t.getPicUrl}}),t._l(t.pic_url,(function(e,n){return a("div",{key:n},[a("span",[t._v(t._s(e))])])}))],2),a("el-col",{attrs:{span:6}},[a("pic-carousel",{ref:"picCar",attrs:{proPicUrl:t.pic_url}})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("ckeditor",{attrs:{config:t.editorConfig},on:{ready:t.prefill},model:{value:t.addProductData.pro_desc,callback:function(e){t.$set(t.addProductData,"pro_desc",e)},expression:"addProductData.pro_desc"}})],1)],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")]),a("el-dialog",{attrs:{visible:t.PicDialogTableVisible,width:"95%","append-to-body":!0},on:{"update:visible":function(e){t.PicDialogTableVisible=e}}},[a("image-table",{ref:"imageTable",on:{patchImageTable:t.patchImageTable}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.selectImage}},[t._v("确 定")])],1)],1)],1)},P=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("el-carousel",{attrs:{trigger:"click",height:"150px"}},t._l(t.proPicUrl,(function(t,e){return a("el-carousel-item",{key:e},[a("img",{staticClass:"car-img",attrs:{src:t}})])})),1)],1)},$=[],S={name:"picCarousel",data:function(){return{picUrlList:[]}},props:{proPicUrl:Array},methods:{}},T=S,C=(a("5cc5"),Object(h["a"])(T,x,$,!1,null,null,null)),O=C.exports,j=a("4c60"),z=a("6cbe"),V=a("f719"),E=a("685c"),A={name:"addProduct",components:{picCarousel:O,uploadPic:j["a"],richText:z["a"],addProductColor:c["a"],imageTable:V["a"]},props:{addProductVisble:{type:Boolean,default:!1},addProductData:{type:Object,default:function(){return{pro_color:""}}}},data:function(){return{imageData:[],PicDialogTableVisible:!1,productTypeData:[],pic_url:[],pic_id:"",options:[{label:"是",value:1},{label:"否",value:0}],childAddColorBtn:!0,editorConfig:{toolbar:[["Source"],["Styles","Format","Font","FontSize"],["Bold","Italic"],["Undo","Redo"],["Image"],["About"]]}}},methods:{selectTest:function(t){var e=this;!0===t&&Object(r["a"])().then((function(t){t.data.results.forEach((function(t){null!==t.parent_category&&e.productTypeData.push(t)}))}))},delProColor:function(t,e){var a="";this.productsData[e].pro_color.split("|").forEach((function(e,n){-1===e.indexOf(t)&&""!==e&&(a+=e+"|")})),this.productsData[e].pro_color=a},handleSelect:function(t){""===this.addProductData.pro_color?this.addProductData.pro_color=JSON.stringify(t)+"|":this.addProductData.pro_color+=JSON.stringify(t)+"|"},getPicUrl:function(t){this.pic_url.push(t.url),this.pic_id=t.id},onSubmit:function(){var t=this;Object(r["f"])(this.addProductData).then((function(e){Object(E["c"])(t.pic_id,{pro_number:e.data.id}).then((function(e){t.$notify({message:"创建成功",type:"success"})}))})).catch((function(e){t.$notify.error({message:"创建失败"})}))},close:function(){var t=this;this.$confirm("数据未保存,确认关闭?").then((function(e){t.$emit("closeAddProductDialog"),t.pic_url=[]})).catch((function(t){}))},handleSave:function(){var t=this;Object(r["d"])(this.addProductData.id,this.addProductData).then((function(e){t.$notify({message:"提交成功",type:"success"})})).catch((function(e){t.$notify.error({message:"提交失败"})}))},prefill:function(){this.addProductData.pro_desc="test"},selectPic:function(){this.PicDialogTableVisible=!0},patchImageTable:function(t){this.imageData=t},handlePatchImageTable:function(t){var e=this;this.imageData.forEach((function(a){Object(E["c"])({pro_number:t},a.id).then((function(t){e.pic_url.push("https://chinagoodgifts.com/image/"+t.data.path),e.$refs.imageTable.clearSelect(),e.PicDialogTableVisible=!1})).catch((function(t){e.$notify.error({title:"错误",message:"图片选中失败,请重试"})}))}))},selectImage:function(){var t=this;this.addProductData.id?this.handlePatchImageTable(this.addProductData.id):Object(r["f"])(this.addProductData).then((function(e){t.handlePatchImageTable(e.data.id)})).catch((function(e){t.$notify.error({title:"错误",message:"产品提交不成功,请重试"})}))}}},B=A,I=Object(h["a"])(B,k,P,!1,null,null,null),N=I.exports,U={components:{ProductTable:b,addProductType:w,addProduct:N},data:function(){return{productsData:{pro_color:""},addproductTypeVisible:!1,addProductVisible:!1}},methods:{pagination:function(){},addproductType:function(){this.addproductTypeVisible=!0},addproductData:function(){this.addProductVisible=!0},closeAddproductType:function(){this.addproductTypeVisible=!1},closeAddProductDialog:function(){this.addProductVisible=!1,this.productsData={pro_color:""}},checkproductData:function(t){var e=this;console.log(t),t.pro_image.forEach((function(t){e.$refs.addProductComponent.getPicUrl({url:"https://chinagoodgifts.com/image/"+t})})),this.addProductVisible=!0,this.productsData=t}}},M=U,R=Object(h["a"])(M,n,o,!1,null,"76d8834b",null);e["default"]=R.exports},"033e":function(t,e,a){},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"4c60":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.picdialogVisible=!0}}},[t._v("上传图片")]),a("el-dialog",{attrs:{title:"",visible:t.picdialogVisible,width:"50%","append-to-body":!0},on:{"update:visible":function(e){t.picdialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("span",[t._v("首页")])]),a("el-col",{attrs:{span:4}},[a("span",[t._v("首页顺序")])]),a("el-col",{attrs:{span:4}},[t._v("banner")]),a("el-col",{attrs:{span:12}},[t._v("alt(首页,首页顺序,banner,alt非必填项)")])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:""},model:{value:t.uploadData.is_home,callback:function(e){t.$set(t.uploadData,"is_home",e)},expression:"uploadData.is_home"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:t.uploadData.home_index,callback:function(e){t.$set(t.uploadData,"home_index",e)},expression:"uploadData.home_index"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:""},model:{value:t.uploadData.is_banner,callback:function(e){t.$set(t.uploadData,"is_banner",e)},expression:"uploadData.is_banner"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.uploadData.image_alt,callback:function(e){t.$set(t.uploadData,"image_alt",e)},expression:"uploadData.image_alt"}})],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.actionUrl,"on-success":t.uploadSuccess,"file-list":t.fileList,limit:1,data:t.uploadData,headers:t.myheaders,accept:"image/jpg, image/jpeg, image/png","auto-upload":!1,"on-exceed":t.handleExceed}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.uploadBtn}},[t._v("上传到服务器")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)},o=[],i=(a("a9e3"),{name:"uploadPic",props:{owner:{type:String,default:"public"},index:{type:Number,default:99},number:{type:String,default:"default"}},data:function(){return{picdialogVisible:!1,actionUrl:"https://chinagoodgifts.com/api/upload/",fileList:[],uploadData:{owner:this.owner,number:this.number},myheaders:{authorization:window.localStorage.getItem("token")},options:[{value:"0",label:"否"},{value:"1",label:"是"}]}},methods:{uploadSuccess:function(t){switch(t.status){case 1e3:this.$message("上传成功"),this.$emit("sendPicUrl",{url:"https://chinagoodgifts.com/image/"+t.file,index:this.index,id:t.id});break;case 1001:this.$message.error("图片尺寸太大,请选择500kb以下的图片");break;case 1002:this.$message.error("非法的文件格式,或图片已损坏");break;case 1003:this.$message("找到相同的图片"),this.$emit("sendPicUrl",{url:"https://chinagoodgifts.com/image/"+t.file,index:this.index,id:t.id});default:break}},handleExceed:function(){this.$message.error("单次只能上传一张图片")},uploadBtn:function(){void 0===this.uploadData.home_index&&(this.uploadData.home_index=0),void 0===this.uploadData.is_home&&(this.uploadData.is_home=0),void 0===this.uploadData.is_banner&&(this.uploadData.is_banner=0),""===this.number?this.$message.error("请完整填写订单信息!"):(this.uploadData.number=this.number,this.$refs.upload.submit())}}}),l=i,r=a("2877"),c=Object(r["a"])(l,n,o,!1,null,null,null);e["a"]=c.exports},"4c79":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return r})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return s})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return d}));var n=a("6128"),o=a("4328"),i=a.n(o);function l(t){return Object(n["a"])({url:"product_type/",params:t})}function r(t){return Object(n["a"])({url:"product_type/",method:"post",data:i.a.stringify(t)})}function c(t,e){return Object(n["a"])({url:"product_type/".concat(t,"/"),method:"patch",data:i.a.stringify(e)})}function s(t){return Object(n["a"])({url:"products/",params:t})}function u(t){return Object(n["a"])({url:"products/",method:"post",data:i.a.stringify(t)})}function d(t,e){return Object(n["a"])({url:"products/".concat(t,"/"),method:"patch",data:i.a.stringify(e)})}},"5cc5":function(t,e,a){"use strict";var n=a("033e"),o=a.n(n);o.a},6681:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:function(e){return t.dateRangeChange(t.value)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},o=[],i={name:"dateSearch",data:function(){return{value:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},methods:{dateRangeChange:function(t){this.$emit("dateSearchDate",t)}}},l=i,r=a("2877"),c=Object(r["a"])(l,n,o,!1,null,"57cc3ee9",null);e["a"]=c.exports},"685c":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return l}));var n=a("6128");function o(t){return Object(n["a"])({url:"upload/",params:t})}function i(t){return Object(n["a"])({url:"upload/".concat(t,"/"),method:"DELETE"})}function l(t,e){return Object(n["a"])({url:"upload/".concat(t,"/"),method:"patch",data:e})}},"6cbe":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.descDialogVisible=!0}}},[t._v("编辑")]),a("el-dialog",{attrs:{title:"",visible:t.descDialogVisible,width:"50%"},on:{"update:visible":function(e){t.descDialogVisible=e}}},[a("ckeditor",{model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")])],1)],1)},o=[],i={name:"richText",data:function(){return{editorData:"",descDialogVisible:!1}},methods:{submit:function(){this.$emit("submitRichData",this.editorData)}}},l=i,r=a("2877"),c=Object(r["a"])(l,n,o,!1,null,null,null);e["a"]=c.exports},"738d":function(t,e,a){"use strict";var n=a("c035"),o=a.n(n);o.a},"841c":function(t,e,a){"use strict";var n=a("d784"),o=a("825a"),i=a("1d80"),l=a("129f"),r=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=i(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var i=o(t),c=String(this),s=i.lastIndex;l(s,0)||(i.lastIndex=0);var u=r(i,c);return l(i.lastIndex,s)||(i.lastIndex=s),null===u?-1:u.index}]}))},a434:function(t,e,a){"use strict";var n=a("23e7"),o=a("23cb"),i=a("a691"),l=a("50c4"),r=a("7b0b"),c=a("65f0"),s=a("8418"),u=a("1dde"),d=a("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!f},{splice:function(t,e){var a,n,u,d,p,f,_=r(this),v=l(_.length),y=o(t,v),D=arguments.length;if(0===D?a=n=0:1===D?(a=0,n=v-y):(a=D-2,n=m(h(i(e),0),v-y)),v+a-n>b)throw TypeError(g);for(u=c(_,n),d=0;d<n;d++)p=y+d,p in _&&s(u,d,_[p]);if(u.length=n,a<n){for(d=y;d<v-n;d++)p=d+n,f=d+a,p in _?_[f]=_[p]:delete _[f];for(d=v;d>v-n+a;d--)delete _[d-1]}else if(a>n)for(d=v-n;d>y;d--)p=d+n-1,f=d+a-1,p in _?_[f]=_[p]:delete _[f];for(d=0;d<a;d++)_[d+y]=arguments[d+2];return _.length=v-n+a,u}})},b59b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"请输入关键字..."},on:{clear:t.handleSearchClear,input:t.handleInput},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendSearch(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.sendSearch},slot:"append"})],1)],1)},o=[],i=(a("ac1f"),a("841c"),{name:"backendSearch",data:function(){return{search:""}},methods:{handleInput:function(){""===this.search&&this.$emit("parentMethod")},sendSearch:function(){var t=this.search;if(t){var e={param:t};this.$emit("parentMethod",e)}},handleSearchClear:function(){this.$emit("parentMethod")}}}),l=i,r=a("2877"),c=Object(r["a"])(l,n,o,!1,null,"01077c5a",null);e["a"]=c.exports},c035:function(t,e,a){},d2c0:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,200],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.getDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"prev-click":t.handleprevious,"next-click":t.handlenext}})],1)},o=[],i=(a("a9e3"),{name:"pagiNation",data:function(){return{page_size:10,currentPage:1}},props:{getDataTotal:{type:Number,default:0}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:1,page_size:t})},handleCurrentChange:function(t){this.$emit("pagination",{page:t,page_size:this.page_size})},handleprevious:function(t){this.$emit("pagination",{page:t,page_size:this.page_size})},handlenext:function(t){this.$emit("pagination",{page:t,page_size:this.page_size})}}}),l=i,r=a("2877"),c=Object(r["a"])(l,n,o,!1,null,"212aea47",null);e["a"]=c.exports},f719:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:4}},[a("backend-searchVue",{on:{parentMethod:t.pagination}})],1),a("el-col",{attrs:{span:8}},[a("date-search",{on:{dateSearchDate:t.dateSearchDate}})],1),a("el-col",{attrs:{span:4}},[a("upload-pic",{on:{sendPicUrl:t.getPicUrl}})],1)],1),a("el-table",{ref:"imageTableData",attrs:{data:t.imageData,border:"",stripe:""},on:{select:t.handleSelect,"select-all":t.handleSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"所属产品",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_edit?a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":t.selectTest},model:{value:e.row.pro_number,callback:function(a){t.$set(e.row,"pro_number",a)},expression:"scope.row.pro_number"}},t._l(t.productDataSelect,(function(t){return a("el-option",{key:t.id,attrs:{label:t.pro_number,value:t.id}})})),1):a("span",[t._v(t._s(e.row.pro_number))])]}}])}),a("el-table-column",{attrs:{label:"上传日期",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.up_date))])]}}])}),a("el-table-column",{attrs:{label:"所属",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.owner))])]}}])}),a("el-table-column",{attrs:{label:"首页展示",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_edit?a("el-input",{model:{value:e.row.is_home,callback:function(a){t.$set(e.row,"is_home",a)},expression:"scope.row.is_home"}}):a("span",[t._v(t._s(e.row.is_home))])]}}])}),a("el-table-column",{attrs:{label:"首页顺序",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_edit?a("el-input",{model:{value:e.row.home_index,callback:function(a){t.$set(e.row,"home_index",a)},expression:"scope.row.home_index"}}):a("span",[t._v(t._s(e.row.home_index))])]}}])}),a("el-table-column",{attrs:{label:"banner",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_edit?a("el-input",{model:{value:e.row.is_banner,callback:function(a){t.$set(e.row,"is_banner",a)},expression:"scope.row.is_banner"}}):a("span",[t._v(t._s(e.row.is_banner))])]}}])}),a("el-table-column",{attrs:{label:"alt",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_edit?a("el-input",{model:{value:e.row.image_alt,callback:function(a){t.$set(e.row,"image_alt",a)},expression:"scope.row.image_alt"}}):a("span",[t._v(t._s(e.row.image_alt))])]}}])}),a("el-table-column",{attrs:{label:"是否占用",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.is_used))])]}}])}),a("el-table-column",{attrs:{label:"图片",align:"center",width:"300",fiexd:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"image",attrs:{src:t.baseurl+e.row.path,alt:e.row.path}})]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.row.is_edit,expression:"scope.row.is_edit === 0"}],attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleChange(e.row)}}},[t._v("修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1===e.row.is_edit,expression:"scope.row.is_edit === 1"}],attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleSave(e.row)}}},[t._v("保存")])]}}])})],1),a("pagi-nation",{attrs:{getDataTotal:t.dataTotal},on:{pagination:t.pagination}})],1)},o=[],i=a("d2c0"),l=a("6681"),r=a("b59b"),c=a("4c60"),s=a("685c"),u=a("4c79"),d={name:"imageTable",components:{pagiNation:i["a"],backendSearchVue:r["a"],dateSearch:l["a"],uploadPic:c["a"]},data:function(){return{imageData:[],dataTotal:0,baseurl:"https://chinagoodgifts.com/image/",productDataSelect:[]}},methods:{selectTest:function(t){var e=this;!0===t&&Object(u["b"])().then((function(t){e.productDataSelect=t.data.results,console.log(t.data)}))},handleSelect:function(t){this.$emit("patchImageTable",t)},dateSearchDate:function(t){t?this.pagination({start_date:t[0],end_date:t[1],argument:"date_search"}):this.pagination()},pagination:function(t){var e=this;t||(t={page:1,page_size:10}),Object(s["b"])(t).then((function(t){e.loading=!1,e.imageData=t.data.results,e.dataTotal=t.data.count}))},handleDel:function(t){var e=this;Object(s["a"])(t.id).then((function(t){e.pagination()}))},handleChange:function(t){t.is_edit=1},handleSave:function(t){var e=this;t.is_edit=0,Object(s["c"])(t.id,t).then((function(t){e.pagination()}))},clearSelect:function(){this.$refs.imageTableData.clearSelection()},getPicUrl:function(t){this.$message("图片上传成功!")}},created:function(){this.pagination()}},p=d,f=(a("738d"),a("2877")),h=Object(f["a"])(p,n,o,!1,null,null,null);e["a"]=h.exports}}]);