(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-738e4aa6"],{"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var a=r("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(t,e):void 0}}},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=r("6b75");function n(t){if(Array.isArray(t))return Object(a["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var i=r("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||o(t)||Object(i["a"])(t)||s()}},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");var a=r("ade3");function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"6b75":function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,"a",(function(){return a}))},"6cf0":function(t,e,r){"use strict";var a=r("d264"),n=r.n(a);n.a},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),u=r("8418"),l=r("1dde"),d=r("ae40"),f=l("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var r,a,l,d,f,m,v=s(this),w=i(v.length),_=n(t,w),y=arguments.length;if(0===y?r=a=0:1===y?(r=0,a=w-_):(r=y-2,a=b(p(o(e),0),w-_)),w+r-a>h)throw TypeError(g);for(l=c(v,a),d=0;d<a;d++)f=_+d,f in v&&u(l,d,v[f]);if(l.length=a,r<a){for(d=_;d<w-a;d++)f=d+a,m=d+r,f in v?v[m]=v[f]:delete v[m];for(d=w;d>w-a+r;d--)delete v[d-1]}else if(r>a)for(d=w-a;d>_;d--)f=d+a-1,m=d+r-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<r;d++)v[d+_]=arguments[d+2];return v.length=w-a+r,l}})},ade3:function(t,e,r){"use strict";function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return a}))},c62c:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("model-table")},n=[],o=r("ee20"),i={components:{modelTable:o["a"]}},s=i,c=r("2877"),u=Object(c["a"])(s,a,n,!1,null,null,null);e["default"]=u.exports},d264:function(t,e,r){},dbb4:function(t,e,r){var a=r("23e7"),n=r("83ab"),o=r("56ef"),i=r("fc6a"),s=r("06cf"),c=r("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,r,a=i(t),n=s.f,u=o(a),l={},d=0;while(u.length>d)r=n(a,e=u[d++]),void 0!==r&&c(l,e,r);return l}})},e290:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("a-button",{attrs:{type:"primary"},on:{click:t.showDrawer}},[t._v("New Model")]),r("a-drawer",{attrs:{title:"Create New Model",visible:t.visible,width:"40%","body-style":{paddingBottom:"80px"},destroyOnClose:!0},on:{close:t.onClose}},[r("a-form-model",{ref:"addModelForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[r("a-form-model-item",{attrs:{label:"supplier",prop:"supplier"}},[r("a-select",{attrs:{size:"default"},on:{dropdownVisibleChange:t.dropdownVisibleChange},model:{value:t.form.supplier,callback:function(e){t.$set(t.form,"supplier",e)},expression:"form.supplier"}},t._l(t.customers,(function(e,a){return r("a-select-option",{key:a,attrs:{value:e.lite_name}},[t._v(t._s(e.lite_name))])})),1)],1),r("a-form-model-item",{attrs:{label:"attribute",prop:"atr"}},[r("a-select",{attrs:{placeholder:"非必填项目"}},[r("a-select-option",{attrs:{value:"1"}},[t._v("自有")]),r("a-select-option",{attrs:{value:"2"}},[t._v("工厂")]),r("a-select-option",{attrs:{value:"3"}},[t._v("样品")])],1)],1),r("a-form-model-item",{attrs:{label:"material",prop:"material"}},[r("a-select",{attrs:{placeholder:"非必填项目"}},[r("a-select-option",{attrs:{value:"1"}},[t._v("铜模")]),r("a-select-option",{attrs:{value:"2"}},[t._v("钢模")])],1)],1),r("a-form-model-item",{attrs:{label:"size",prop:"size"}},[r("a-input",{attrs:{placeholder:"非必填项目"},model:{value:t.form.size,callback:function(e){t.$set(t.form,"size",e)},expression:"form.size"}})],1),r("a-form-model-item",{attrs:{label:"construct",prop:"construct"}},[r("a-input",{attrs:{placeholder:"非必填项目"},model:{value:t.form.construct,callback:function(e){t.$set(t.form,"construct",e)},expression:"form.construct"}})],1),r("a-form-model-item",{attrs:{label:"production date",prop:"pro_date"}},[r("a-date-picker",{model:{value:t.form.pro_date,callback:function(e){t.$set(t.form,"pro_date",e)},expression:"form.pro_date"}})],1),r("a-form-model-item",{attrs:{label:"useful life",prop:"useful_life"}},[r("a-input",{attrs:{placeholder:"非必填项目"},model:{value:t.form.useful_life,callback:function(e){t.$set(t.form,"useful_life",e)},expression:"form.useful_life"}})],1),r("a-form-model-item",{attrs:{label:"price",prop:"price"}},[r("a-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),r("a-form-model-item",{attrs:{label:"remarks",prop:"remarks"}},[r("a-input",{attrs:{type:"textarea"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1),r("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Create")])],1)],1)],1)},n=[],o=(r("a9e3"),r("f6b0")),i=r("f8b7"),s={data:function(){return{visible:!1,labelCol:{span:4},wrapperCol:{span:14},customers:[],form:{supplier:"",atr:Number,material:Number,size:"",construct:"",pro_date:"",useful_life:"",price:"",remarks:""},rules:{supplier:[{required:!0,message:"Please select supplier",trigger:"change"}],pro_date:[{required:!0,message:"Please select date"}],price:[{required:!0,message:"Please input price"}]}}},methods:{dropdownVisibleChange:function(){var t=this;0===this.customers.length&&Object(o["a"])().then((function(e){t.customers=e.data})).catch((function(t){}))},submit:function(){var t=this;this.form.pro_date=this.form.pro_date.format("YYYY-MM-DD"),Object(i["k"])(this.form).then((function(e){t.$emit("getData"),e.data.sale_price=0,t.$emit("getNewModelData",e.data),t.onClose(),t.$message.success("提交成功")})).catch((function(e){t.$message.error("提交失败,请重新录入"),t.onClose(),t.form={}}))},showDrawer:function(){this.visible=!0,this.$emit("hideOrderTable",!1)},onClose:function(){this.visible=!1,this.$emit("hideOrderTable",!0)}}},c=s,u=r("2877"),l=Object(u["a"])(c,a,n,!1,null,null,null);e["a"]=l.exports},e439:function(t,e,r){var a=r("23e7"),n=r("d039"),o=r("fc6a"),i=r("06cf").f,s=r("83ab"),c=n((function(){i(1)})),u=!s||c;a({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return i(o(t),e)}})},ee20:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("add-model",{attrs:{hidden:t.selectingShow},on:{getData:t.getData}}),r("a-table",{attrs:{columns:t.columns,rowKey:"id","data-source":t.data,pagination:t.pagination,loading:t.loading,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},bordered:""},scopedSlots:t._u([t._l(["size","remarks","construct","material"],(function(e){return{key:e,fn:function(a,n,o){return[r("div",{key:e},[n.editable?r("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{change:function(r){return t.handleChange(r.target.value,o,e)}}}):[t._v(t._s(a))]],2)]}}})),{key:"atr",fn:function(e,a,n){return[r("div",{key:"atr"},[a.editable?r("a-select",{attrs:{"default-value":e},on:{select:t.handleSelect}},t._l(["自有","工厂","样品"],(function(e,a){return r("a-select-option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1):[t._v(t._s(t._f("modelAttr")(e)))]],2)]}},{key:"material",fn:function(e,a,n){return[r("div",{key:"material"},[a.editable?r("a-select",{attrs:{"default-value":e},on:{select:t.handleSelectMaterial}},t._l(["铜模","钢模"],(function(e,a){return r("a-select-option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1):[t._v(t._s(t._f("modelMaterial")(e)))]],2)]}},{key:"operation",fn:function(e,a,n){return[r("div",{staticClass:"editable-row-operations"},[a.editable?r("span",[r("a",{on:{click:function(){return t.save(a.id,n)}}},[t._v("Save")]),r("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(n,a)}}},[r("a",[t._v("Cancel")])])],1):r("span",[r("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(n)}}},[t._v("Edit")]),t.data.length?r("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return t.onDelete(a.id,n)}}},[r("a",{attrs:{href:"javascript:;"}},[t._v("Delete")])]):t._e()],1)])]}}],null,!0)}),r("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)},n=[],o=(r("4160"),r("a434"),r("159b"),r("2909")),i=r("5530"),s=r("f8b7"),c=r("e290"),u=[{title:"供应商",dataIndex:"supplier",width:"8%",scopedSlots:{customRender:"supplier"}},{title:"编号",dataIndex:"number",width:"10%",scopedSlots:{customRender:"number"}},{title:"属性",dataIndex:"atr",width:"5%",scopedSlots:{customRender:"atr"}},{title:"材质",dataIndex:"material",width:"5%",scopedSlots:{customRender:"material"}},{title:"尺寸",dataIndex:"size",width:"8%",scopedSlots:{customRender:"size"}},{title:"构造",dataIndex:"construct",width:"5%",scopedSlots:{customRender:"construct"}},{title:"生产日期",dataIndex:"pro_date",width:"10%",scopedSlots:{customRender:"pro_date"}},{title:"使用寿命",dataIndex:"useful_life",width:"8%",scopedSlots:{customRender:"useful_life"}},{title:"单价",dataIndex:"price",width:"8%",scopedSlots:{customRender:"price"}},{title:"备注",dataIndex:"remarks",width:"15%",scopedSlots:{customRender:"remarks"}},{title:"opration",dataIndex:"opration",scopedSlots:{customRender:"operation"}}],l={components:{addModel:c["a"]},props:{selectingShow:{type:Boolean,default:!1}},data:function(){return{data:[],pagination:{},loading:!1,editingKey:"",editingRow:0,selectedRowKeys:[],selectData:[],tableSelecting:!1,columns:u}},mounted:function(){this.getData()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{getData:function(){var t=this;this.loading=!0,Object(s["c"])().then((function(e){var r=Object(i["a"])({},t.pagination);r.total=e.data.count,t.loading=!1,t.data=e.data.results,t.pagination=r}))},handleChange:function(t,e,r){var a=Object(o["a"])(this.data),n=a[e];n&&(n[r]=t,this.data=a)},edit:function(t){var e=Object(o["a"])(this.data),r=e[t];r&&(r.editable=!0,this.editingRow=t,this.data=e)},save:function(t,e){var r=this,a=Object(o["a"])(this.data),n=a[e];n&&Object(s["g"])(t,n).then((function(t){n.editable=!1,r.data=a,r.$message.success("修改成功")})).catch((function(t){r.$message.error("修改失败")}))},cancel:function(t,e){this.getData()},onDelete:function(t,e){var r=this;Object(s["g"])(t,{is_delete:1}).then((function(t){r.data.splice(e,1),r.$message.success("删除成功")})).catch((function(t){r.$message.error("删除失败")}))},handleSelect:function(t){this.data[this.editingRow].atr=t},handleSelectMaterial:function(t){this.data[this.editingRow].material=t},onSelectChange:function(t,e){this.selectedRowKeys=t,e.forEach((function(t){t.sale_price=0})),this.selectData=e},submit:function(){var t=this;this.selectData.forEach((function(e){t.$emit("getNewModelData",e)}))}}},d=l,f=(r("6cf0"),r("2877")),m=Object(f["a"])(d,a,n,!1,null,"a0d5b554",null);e["a"]=m.exports},f6b0:function(t,e,r){"use strict";r.d(e,"d",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"c",(function(){return l}));var a=r("6128"),n=r("4328"),o=r.n(n);function i(t){return Object(a["a"])({url:"customers/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(t)})}function s(t){return Object(a["a"])({url:"customers/",params:t})}function c(t){return Object(a["a"])({url:"customer_addr/",params:t})}function u(t){return Object(a["a"])({url:"customer_addr/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(t)})}function l(t,e){return Object(a["a"])({url:"customer_addr/".concat(t,"/"),method:"patch",data:o.a.stringify(e)})}},f8b7:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"j",(function(){return c})),r.d(e,"f",(function(){return u})),r.d(e,"e",(function(){return l})),r.d(e,"i",(function(){return d})),r.d(e,"m",(function(){return f})),r.d(e,"c",(function(){return m})),r.d(e,"g",(function(){return p})),r.d(e,"k",(function(){return b})),r.d(e,"d",(function(){return h})),r.d(e,"l",(function(){return g})),r.d(e,"h",(function(){return v}));var a=r("6128"),n=r("4328"),o=r.n(n);function i(t){return Object(a["a"])({url:"orders/",params:t})}function s(t,e){return Object(a["a"])({url:"orders/".concat(t,"/"),params:e})}function c(t){return Object(a["a"])({url:"orders/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(t)})}function u(t,e){return Object(a["a"])({url:"orders/".concat(t,"/"),method:"patch",data:o.a.stringify(e)})}function l(t){return Object(a["a"])({url:"suborders/",params:t})}function d(t,e){return Object(a["a"])({url:"suborders/".concat(t,"/"),method:"patch",data:o.a.stringify(e)})}function f(t){return Object(a["a"])({url:"suborders/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(t)})}function m(t){return Object(a["a"])({url:"order_model/",params:t})}function p(t,e){return Object(a["a"])({url:"order_model/".concat(t,"/"),method:"patch",data:o.a.stringify(e)})}function b(t){return Object(a["a"])({url:"order_model/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(t)})}function h(t){return Object(a["a"])({url:"order_to_model/",params:t})}function g(t){return Object(a["a"])({url:"order_to_model/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(t)})}function v(t,e){return Object(a["a"])({url:"order_to_model/".concat(t,"/"),method:"patch",data:o.a.stringify(e)})}}}]);