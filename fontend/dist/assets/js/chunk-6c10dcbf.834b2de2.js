(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c10dcbf"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a630"),a("fb6a"),a("b0c0"),a("d3b7"),a("25f0"),a("3ca3");var r=a("6b75");function o(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("6b75");function o(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var i=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return o(e)||n(e)||Object(i["a"])(e)||s()}},"37e1":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return n}));var r=a("6128");function o(){Object(r["a"])({url:"orders/",params:{st:"addorder"}}).then((function(e){window.sessionStorage.setItem("subtoken",e.data.subtoken)}))}function n(){window.sessionStorage.removeItem("subtoken")}},"45fc":function(e,t,a){"use strict";var r=a("23e7"),o=a("b727").some,n=a("a640"),i=a("ae40"),s=n("some"),l=i("some");r({target:"Array",proto:!0,forced:!s||!l},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4c60":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.picdialogVisible=!0}}},[e._v("上传图片")]),a("el-dialog",{attrs:{title:"",visible:e.picdialogVisible,width:"50%","append-to-body":!0},on:{"update:visible":function(t){e.picdialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("span",[e._v("首页")])]),a("el-col",{attrs:{span:4}},[a("span",[e._v("首页顺序")])]),a("el-col",{attrs:{span:4}},[e._v("banner")]),a("el-col",{attrs:{span:12}},[e._v("alt(首页,首页顺序,banner,alt非必填项)")])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:""},model:{value:e.uploadData.is_home,callback:function(t){e.$set(e.uploadData,"is_home",t)},expression:"uploadData.is_home"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:e.uploadData.home_index,callback:function(t){e.$set(e.uploadData,"home_index",t)},expression:"uploadData.home_index"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:""},model:{value:e.uploadData.is_banner,callback:function(t){e.$set(e.uploadData,"is_banner",t)},expression:"uploadData.is_banner"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.uploadData.image_alt,callback:function(t){e.$set(e.uploadData,"image_alt",t)},expression:"uploadData.image_alt"}})],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.actionUrl,"on-success":e.uploadSuccess,"file-list":e.fileList,limit:1,data:e.uploadData,headers:e.myheaders,accept:"image/jpg, image/jpeg, image/png","auto-upload":!1,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.uploadBtn}},[e._v("上传到服务器")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1)],1)},o=[],n=(a("a9e3"),{name:"uploadPic",props:{owner:{type:String,default:"public"},index:{type:Number,default:99},number:{type:String,default:"default"}},data:function(){return{picdialogVisible:!1,actionUrl:"https://chinagoodgifts.com/api/upload/",fileList:[],uploadData:{owner:this.owner,number:this.number},myheaders:{authorization:window.localStorage.getItem("token")},options:[{value:"0",label:"否"},{value:"1",label:"是"}]}},methods:{uploadSuccess:function(e){switch(e.status){case 1e3:this.$message("上传成功"),this.$emit("sendPicUrl",{url:"https://chinagoodgifts.com/image/"+e.file,index:this.index,id:e.id});break;case 1001:this.$message.error("图片尺寸太大,请选择500kb以下的图片");break;case 1002:this.$message.error("非法的文件格式,或图片已损坏");break;case 1003:this.$message("找到相同的图片"),this.$emit("sendPicUrl",{url:"https://chinagoodgifts.com/image/"+e.file,index:this.index,id:e.id});default:break}},handleExceed:function(){this.$message.error("单次只能上传一张图片")},uploadBtn:function(){void 0===this.uploadData.home_index&&(this.uploadData.home_index=0),void 0===this.uploadData.is_home&&(this.uploadData.is_home=0),void 0===this.uploadData.is_banner&&(this.uploadData.is_banner=0),""===this.number?this.$message.error("请完整填写订单信息!"):(this.uploadData.number=this.number,this.$refs.upload.submit())}}}),i=n,s=a("2877"),l=Object(s["a"])(i,r,o,!1,null,null,null);t["a"]=l.exports},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var r=a("ade3");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"570c":function(e,t,a){},6681:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:function(t){return e.dateRangeChange(e.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},o=[],n={name:"dateSearch",data:function(){return{value:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{dateRangeChange:function(e){this.$emit("dateSearchDate",e)}}},i=n,s=a("2877"),l=Object(s["a"])(i,r,o,!1,null,"57cc3ee9",null);t["a"]=l.exports},"685c":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i}));var r=a("6128");function o(e){return Object(r["a"])({url:"upload/",params:e})}function n(e){return Object(r["a"])({url:"upload/".concat(e,"/"),method:"DELETE"})}function i(e,t){return Object(r["a"])({url:"upload/".concat(e,"/"),method:"patch",data:t})}},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},"7db0":function(e,t,a){"use strict";var r=a("23e7"),o=a("b727").find,n=a("44d2"),i=a("ae40"),s="find",l=!0,c=i(s);s in[]&&Array(1)[s]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},"841c":function(e,t,a){"use strict";var r=a("d784"),o=a("825a"),n=a("1d80"),i=a("129f"),s=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var n=o(e),l=String(this),c=n.lastIndex;i(c,0)||(n.lastIndex=0);var d=s(n,l);return i(n.lastIndex,c)||(n.lastIndex=c),null===d?-1:d.index}]}))},"91f9":function(e,t,a){},9466:function(e,t,a){"use strict";var r=a("b069"),o=a.n(r);o.a},a434:function(e,t,a){"use strict";var r=a("23e7"),o=a("23cb"),n=a("a691"),i=a("50c4"),s=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),p=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,h=9007199254740991,_="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var a,r,d,u,p,m,g=s(this),v=i(g.length),w=o(e,v),y=arguments.length;if(0===y?a=r=0:1===y?(a=0,r=v-w):(a=y-2,r=b(f(n(t),0),v-w)),v+a-r>h)throw TypeError(_);for(d=l(g,r),u=0;u<r;u++)p=w+u,p in g&&c(d,u,g[p]);if(d.length=r,a<r){for(u=w;u<v-r;u++)p=u+r,m=u+a,p in g?g[m]=g[p]:delete g[m];for(u=v;u>v-r+a;u--)delete g[u-1]}else if(a>r)for(u=v-r;u>w;u--)p=u+r-1,m=u+a-1,p in g?g[m]=g[p]:delete g[m];for(u=0;u<a;u++)g[u+w]=arguments[u+2];return g.length=v-r+a,d}})},ade3:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))},b069:function(e,t,a){},b74f:function(e,t,a){"use strict";var r=a("fa1d"),o=a.n(r);o.a},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");var r=a("06c5");function o(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(l)throw i}}}}},c35e:function(e,t,a){"use strict";var r=a("570c"),o=a.n(r);o.a},cf32:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-table",{attrs:{columns:e.checkModelData,rowKey:"id","data-source":e.modelData,bordered:"",size:"small"},scopedSlots:e._u([{key:"sale_price",fn:function(t,r,o){return[a("editable-cell",{attrs:{text:t},on:{change:function(t){return e.onCellChange(r.id,"sale_price",t)}}})]}},{key:"operation",fn:function(t,r,o){return[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.onDelete(r.id)}}},[e._v("delete")])]}},{key:"footer",fn:function(t){return[a("span",{staticClass:"table-footer-span"},[e._v("模具费")]),a("span",{staticClass:"table-footer-span"},[e._v("采购合计(¥)"+e._s(e.sumBuy(t)))]),a("span",{staticClass:"table-footer-span"},[e._v("销售合计($):"+e._s(e.sumModel(t)))])]}}])})],1)},o=[],n=(a("d81d"),a("13d5"),a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editable-cell"},[e.editable?a("div",{staticClass:"editable-cell-input-wrapper"},[a("a-input",{attrs:{value:e.value},on:{change:e.handleChange,pressEnter:e.check}}),a("a-icon",{staticClass:"editable-cell-icon-check",attrs:{type:"check"},on:{click:e.check}})],1):a("div",{staticClass:"editable-cell-text-wrapper"},[e._v(" "+e._s(e.value)+" "),a("a-icon",{staticClass:"editable-cell-icon",attrs:{type:"edit"},on:{click:e.edit}})],1)])}),i=[],s={props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}},l=s,c=(a("c35e"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,"29cc938e",null),u=d.exports,p=[{title:"供应商",dataIndex:"supplier",width:"8%",scopedSlots:{customRender:"supplier"}},{title:"编号",dataIndex:"number",width:"10%",scopedSlots:{customRender:"number"}},{title:"构造",dataIndex:"mconstruct",width:"5%",scopedSlots:{customRender:"construct"}},{title:"生产日期",dataIndex:"pro_date",width:"10%",scopedSlots:{customRender:"pro_date"}},{title:"单价",dataIndex:"price",width:"8%",scopedSlots:{customRender:"price"}},{title:"销售价($)",dataIndex:"sale_price",width:"8%",scopedSlots:{customRender:"sale_price"}},{title:"备注",dataIndex:"remarks",scopedSlots:{customRender:"remarks"}},{title:"opration",dataIndex:"opration",scopedSlots:{customRender:"operation"}}],m=[{title:"供应商",dataIndex:"model.supplier",width:"8%",scopedSlots:{customRender:"supplier"}},{title:"编号",dataIndex:"model.number",width:"10%",scopedSlots:{customRender:"number"}},{title:"构造",dataIndex:"model.mconstruct",width:"5%",scopedSlots:{customRender:"construct"}},{title:"生产日期",dataIndex:"model.pro_date",width:"10%",scopedSlots:{customRender:"pro_date"}},{title:"单价",dataIndex:"model.price",width:"8%",scopedSlots:{customRender:"price"}},{title:"销售价($)",dataIndex:"sale_price",width:"8%",scopedSlots:{customRender:"sale_price"}},{title:"备注",dataIndex:"model.remarks",scopedSlots:{customRender:"remarks"}},{title:"opration",dataIndex:"opration",scopedSlots:{customRender:"operation"}}],f={components:{EditableCell:u},data:function(){return{salePriceValue:0,columns:p,columns2:m}},props:{modelData:Array,checkCulumns:Number},computed:{checkModelData:function(){return 2===this.checkCulumns?this.columns2:1===this.checkCulumns?this.columns:void 0}},methods:{onCellChange:function(e,t,a){this.$emit("setSalePrice",{id:e,val:a})},onDelete:function(e){this.$emit("deleteNewModelRow",e)},sumModel:function(e){var t=e.map((function(e){return Number(e.sale_price)}));return t.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0)},sumBuy:function(e){if(1===this.checkCulumns){var t=e.map((function(e){return Number(e.price)}));return t.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0)}if(2===this.checkCulumns){var a=e.map((function(e){return Number(e.model.price)}));return a.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0)}}}},b=f,h=(a("d259"),Object(c["a"])(b,r,o,!1,null,"33fc6eb4",null));t["a"]=h.exports},d259:function(e,t,a){"use strict";var r=a("91f9"),o=a.n(r);o.a},d928:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("订单管理")]),a("el-breadcrumb-item",[e._v("订单列表")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{size:"mini",placeholder:"关键字搜索:订单/日期/客户/地址/备注"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clearnSearchText}},[e._v("清除")])],1),a("el-col",{attrs:{span:2}},[a("add-order")],1),a("el-col",{attrs:{span:6}},[a("date-search",{on:{dateSearchDate:e.dateSearchDate}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{},attrs:{data:e.handlePage(e.page,e.pagesize),border:"","show-summary":"","highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),a("el-table-column",{attrs:{label:"订单编号",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_number))}})]}}])}),a("el-table-column",{attrs:{label:"客户名称",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.customer.lite_name))}})]}}])}),a("el-table-column",{attrs:{label:"下单日期",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_date))}})]}}])}),a("el-table-column",{attrs:{label:"订单交期",prop:"deliver_date",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"汇率",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ex_rate))])]}}])}),a("el-table-column",{attrs:{label:"订单金额($)",prop:"order_amount",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"出货地址",width:"300","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.ship_addr))}})]}}])}),a("el-table-column",{attrs:{label:"备注",width:"150","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.text))}})]}}])}),a("el-table-column",{attrs:{label:"业务",prop:"sales",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",clearable:"",disabled:""},model:{value:t.row.is_done,callback:function(a){e.$set(t.row,"is_done",a)},expression:"scope.row.is_done"}},e._l(e.Options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[1,2,5,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],n=(a("4de4"),a("c975"),a("d81d"),a("fb6a"),a("45fc"),a("a434"),a("b64b"),a("ac1f"),a("5319"),a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-order"},[a("el-button",{attrs:{type:"primary"},on:{click:e.dialogStatus}},[e._v("新增订单")]),a("el-dialog",{attrs:{title:"新增订单",visible:e.dialogVisible,width:"96%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addOrderForm",attrs:{model:e.orderData,"label-width":"80px",size:"mini",rules:e.addOrderFormRoles,"inline-message":""}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单编号",prop:"order_number"}},[a("el-input",{model:{value:e.orderData.order_number,callback:function(t){e.$set(e.orderData,"order_number",t)},expression:"orderData.order_number"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":e.selectTest},model:{value:e.orderData.customer,callback:function(t){e.$set(e.orderData,"customer",t)},expression:"orderData.customer"}},e._l(e.customerData,(function(e){return a("el-option",{key:e.lite_name,attrs:{label:e.lite_name,value:e.lite_name}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"汇率",prop:"ex_rate"}},[a("el-input",{model:{value:e.orderData.ex_rate,callback:function(t){e.$set(e.orderData,"ex_rate",t)},expression:"orderData.ex_rate"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.orderData.is_done,callback:function(t){e.$set(e.orderData,"is_done",t)},expression:"orderData.is_done"}},e._l(e.Orderoptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"下单日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.orderData.order_date,callback:function(t){e.$set(e.orderData,"order_date",t)},expression:"orderData.order_date"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单交期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.orderData.deliver_date,callback:function(t){e.$set(e.orderData,"deliver_date",t)},expression:"orderData.deliver_date"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"金额"}},[a("el-input",{model:{value:e.orderData.order_amount,callback:function(t){e.$set(e.orderData,"order_amount",t)},expression:"orderData.order_amount"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"出货地址"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":e.selectShipAddr},model:{value:e.orderData.ship_addr,callback:function(t){e.$set(e.orderData,"ship_addr",t)},expression:"orderData.ship_addr"}},e._l(e.customerAddr,(function(e){return a("el-option",{key:e.addr,attrs:{label:e.addr,value:e.addr}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:e.orderData.text,callback:function(t){e.$set(e.orderData,"text",t)},expression:"orderData.text"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("add-model",{on:{hideOrderTable:e.dialogStatus2,getNewModelData:e.getNewModel}})],1),a("el-col",{attrs:{span:4}},[a("a-button",{attrs:{type:"primary"},on:{click:e.selectModel}},[e._v("select model")])],1)],1),a("order-model",{attrs:{modelData:e.newModelData,checkCulumns:1},on:{deleteNewModelRow:e.deleteModel,setSalePrice:e.getSalePrice}}),a("el-row",[a("el-col",{attrs:{span:8}},[a("upload-pic",{attrs:{number:e.orderData.order_number,owner:"order"},on:{sendPicUrl:e.getPicUrl}})],1),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"order-img"},[a("img",{staticClass:"orderImg",attrs:{src:this.orderData.order_pic},on:{click:e.imgLook}})])])],1),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addSubOrder()}}},[e._v("新增明细")]),a("el-table",{staticStyle:{width:"99.9%"},attrs:{data:e.subOrderData,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"产品名称",width:"150",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.pro_name,callback:function(a){e.$set(t.row,"pro_name",a)},expression:"scope.row.pro_name"}}):a("span",[e._v(e._s(t.row.pro_name))])]}}])}),a("el-table-column",{attrs:{label:"类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},model:{value:t.row.pro_item,callback:function(a){e.$set(t.row,"pro_item",a)},expression:"scope.row.pro_item"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):a("span",[e._v(e._s(e.options[t.row.pro_item-1].label))])]}}])}),a("el-table-column",{attrs:{label:"产品尺寸",width:"120",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.pro_size,callback:function(a){e.$set(t.row,"pro_size",a)},expression:"scope.row.pro_size"}}):a("span",[e._v(e._s(t.row.pro_size))])]}}])}),a("el-table-column",{attrs:{width:"250",label:"产品颜色",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("add-product-color",{attrs:{parentProColor:t,addColorBtn:e.childAddColorBtn},on:{getProColor:e.handleSelect,delProColor:e.delProColor}})]}}])}),a("el-table-column",{attrs:{label:"产品包装",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.pro_pack,callback:function(a){e.$set(t.row,"pro_pack",a)},expression:"scope.row.pro_pack"}}):a("span",[e._v(e._s(t.row.pro_pack))])]}}])}),a("el-table-column",{attrs:{label:"详细说明",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini",type:"textarea",autosize:""},model:{value:t.row.pro_desc,callback:function(a){e.$set(t.row,"pro_desc",a)},expression:"scope.row.pro_desc"}}):a("span",[e._v(e._s(t.row.pro_desc))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"pro_qt",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.pro_qt,callback:function(a){e.$set(t.row,"pro_qt",a)},expression:"scope.row.pro_qt"}}):a("span",[e._v(e._s(t.row.pro_qt))])]}}])}),a("el-table-column",{attrs:{label:"单价($)",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){return e.subAmount(t.row)}},model:{value:t.row.pro_price,callback:function(a){e.$set(t.row,"pro_price",a)},expression:"scope.row.pro_price"}}):a("span",[e._v(e._s(t.row.pro_price))])]}}])}),a("el-table-column",{attrs:{label:"重量(g)",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.pro_weight,callback:function(a){e.$set(t.row,"pro_weight",a)},expression:"scope.row.pro_weight"}}):a("span",[e._v(e._s(t.row.pro_weight))])]}}])}),a("el-table-column",{attrs:{label:"汇率",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.sub_ex_rate,callback:function(a){e.$set(t.row,"sub_ex_rate",a)},expression:"scope.row.sub_ex_rate"}}):a("span",[e._v(e._s(t.row.sub_ex_rate))])]}}])}),a("el-table-column",{attrs:{label:"金额($)",prop:"sub_amount",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-input",{attrs:{size:"mini"},model:{value:t.row.sub_amount,callback:function(a){e.$set(t.row,"sub_amount",a)},expression:"scope.row.sub_amount"}}):a("span",[e._v(e._s(t.row.sub_amount))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.addSubOrderRow(t.row)}}},[e._v("新增")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editSubOrderRow(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.delSubOrderRow(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1),a("el-dialog",{attrs:{visible:e.imgdialogVisible,width:"96%"},on:{"update:visible":function(t){e.imgdialogVisible=t}}},[a("div",[a("img",{attrs:{src:this.orderData.order_pic,width:"99%"}})])]),a("a-drawer",{attrs:{visible:e.visible,width:"90%",height:"50%",placement:"top","body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("order-tomodel",{attrs:{selectingShow:!0},on:{getNewModelData:e.getNewModel}})],1)],1)}),i=[],s=(a("7db0"),a("4160"),a("d3b7"),a("1276"),a("159b"),a("b85c")),l=a("2909"),c=a("f6b0"),d=a("37e1"),u=a("4328"),p=a.n(u),m=a("f8b7"),f=a("685c"),b=a("2822"),h=a("4c60"),_=a("e290"),g=a("ee20"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-button",{attrs:{type:"primary"},on:{click:e.selectModel}},[e._v("select model")]),a("a-drawer",{attrs:{visible:e.visible,width:"90%",height:"50%",placement:"top","body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("order-tomodel",{attrs:{selectingShow:!0}})],1)],1)},w=[],y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-table",{attrs:{columns:e.columns,rowKey:"id","data-source":e.data,pagination:e.pagination,loading:e.loading,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,onSelect:e.onSelected},bordered:"",size:"small"},scopedSlots:e._u([{key:"atr",fn:function(t){return[e._v(e._s(e._f("modelAttr")(t)))]}},{key:"material",fn:function(t){return[e._v(e._s(e._f("modelMaterial")(t)))]}}])}),a("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)},k=[],S=a("5530"),x=[{title:"订单编号",dataIndex:"order_number.order_number",width:"10%",scopedSlots:{customRender:"order_number"}},{title:"供应商",dataIndex:"model.supplier",width:"8%",scopedSlots:{customRender:"supplier"}},{title:"编号",dataIndex:"model.number",width:"10%",scopedSlots:{customRender:"number"}},{title:"属性",dataIndex:"model.atr",width:"5%",scopedSlots:{customRender:"atr"}},{title:"材质",dataIndex:"model.material",width:"5%",scopedSlots:{customRender:"material"}},{title:"尺寸",dataIndex:"model.size",width:"8%",scopedSlots:{customRender:"size"}},{title:"构造",dataIndex:"model.construct",width:"5%",scopedSlots:{customRender:"construct"}},{title:"生产日期",dataIndex:"model.pro_date",width:"10%",scopedSlots:{customRender:"pro_date"}},{title:"使用寿命",dataIndex:"model.useful_life",width:"8%",scopedSlots:{customRender:"useful_life"}},{title:"单价",dataIndex:"model.price",width:"8%",scopedSlots:{customRender:"price"}},{title:"备注",dataIndex:"model.remarks",scopedSlots:{customRender:"remarks"}}],D={data:function(){return{data:[],pagination:{},loading:!1,editingKey:"",editingRow:0,selectedRowKeys:[],tableSelecting:!1,selectData:[],columns:x}},mounted:function(){this.getData()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{getData:function(){var e=this;this.loading=!0,Object(m["d"])().then((function(t){var a=Object(S["a"])({},e.pagination);a.total=t.data.count,e.loading=!1,e.data=t.data.results}))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectData=t},onSelected:function(e,t,a,r){},submit:function(){var e=this;this.selectData.forEach((function(t){e.$emit("getNewModelData",t.model)}))}}},O=D,j=a("2877"),$=Object(j["a"])(O,y,k,!1,null,"4c6f99b9",null),C=$.exports,R={components:{modelTable:g["a"],orderTomodel:C},data:function(){return{visible:!1}},methods:{selectModel:function(){this.visible=!0,this.$emit("hideOrderTable")},onClose:function(){this.$emit("getNewModel","123"),this.visible=!1,this.$emit("hideOrderTable")}}},I=R,M=Object(j["a"])(I,v,w,!1,null,null,null),z=M.exports,P=a("cf32"),T={name:"AddOrder",components:{addProductColor:b["a"],uploadPic:h["a"],addModel:_["a"],modelTable:g["a"],selectModel:z,orderTomodel:C,orderModel:P["a"]},data:function(){return{newModelData:[],submitModelData:[],childAddColorBtn:!0,customerData:[],customerAddr:[],orderData:{order_number:"",customer:"",order_date:"",deliver_date:"",ex_rate:0,order_amount:0,ship_addr:"",text:"",order_pic:""},subOrderData:[],addOrderFormRoles:{order_number:[{required:!0,message:"请输入订单编号",trigger:"blur"}]},Orderoptions:[{value:0,label:"正常"},{value:1,label:"紧急"}],options:[{value:1,label:"硅胶"},{value:2,label:"五金"},{value:3,label:"USB"},{value:4,label:"移动电源"},{value:5,label:"其他"}],dialogVisible:!1,visible:!1,onSubmitStatus:!1,dialogImageUrl:"",imagedialogVisible:!1,disabled:!1,fileList:[],imgdialogVisible:!1,pic_id:""}},methods:{hideOrderTable:function(){this.dialogVisible=!1},imgLook:function(){this.imgdialogVisible=!0},getPicUrl:function(e){this.orderData.order_pic=e.url,this.pic_id=e.id},beforeRemove:function(){},handleRemove:function(e){},dialogStatus:function(e){this.dialogVisible=!this.dialogVisible,Object(d["b"])()},dialogStatus2:function(e){this.dialogVisible=e},getNewModel:function(e){this.visible=!1,this.dialogVisible=!0,this.newModelData.push(e)},getSalePrice:function(e){var t=Object(l["a"])(this.newModelData),a=t.find((function(t){return t.id===e.id}));a&&(a.sale_price=e.val,this.newModelData=t)},deleteModel:function(e){var t=Object(l["a"])(this.newModelData);this.newModelData=t.filter((function(t){return t.id!==e}))},sumOrderAmount:function(){var e,t=0,a=Object(s["a"])(this.subOrderData);try{for(a.s();!(e=a.n()).done;){var r=e.value;t+=1*r.sub_amount}}catch(o){a.e(o)}finally{a.f()}this.orderData.order_amount=t},beforeSubmitOrder:function(){var e=this,t=Object(l["a"])(this.newModelData);t.forEach((function(t){e.submitModelData.push({order_number:e.orderData.order_number,model:t.id,sale_price:t.sale_price})}))},onSubmit:function(){var e=this;this.beforeSubmitOrder(),this.sumOrderAmount();var t,a=Object(s["a"])(this.subOrderData);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.status=0}}catch(n){a.e(n)}finally{a.f()}if(this.orderData.order_number)if(window.sessionStorage.getItem("subtoken")){var o=new Promise((function(t,a){Object(m["i"])(e.orderData).then((function(r){e.submitModelData.forEach((function(e){Object(m["k"])(e).then((function(e){})).catch((function(e){a(e)}))})),""!==r.data.order_pic&&Object(f["c"])(e.pic_id,{order_number:r.data.order_number}).then((function(t){e.$notify({message:"创建成功",type:"success"})}));var o,i=Object(s["a"])(e.subOrderData);try{for(i.s();!(o=i.n()).done;){var l=o.value;Object(m["l"])(l).then((function(e){})).catch((function(t){var r=p.a.parse(t.response.request.response,{delimiter:","});e.responseMessage(r),a(r)}))}}catch(n){i.e(n)}finally{i.f()}t(r)})).catch((function(t){console.log(t.response.request);var r=p.a.parse(t.response.request.response,{delimiter:","});e.responseMessage(r),a(r)}))}));o.then((function(t){window.sessionStorage.removeItem("subtoken"),window.sessionStorage.setItem("order_number",t.data.order_number),e.$router.replace("orders/"+t.data.order_number+"/")}))}else this.$message.error("请勿重复提交,或刷新重试");else this.$message.error("请完整填写订单信息!")},responseMessage:function(e){this.$notify({title:"警告",message:e,position:"top-left"})},handleClose:function(e){var t=this;this.$confirm("请确认数据已保存!").then((function(a){e(),t.orderData={},t.subOrderData=[],t.fileList=[]})).catch((function(e){}))},delSubOrderRow:function(e,t){this.subOrderData.splice(e,1)},addSubOrder:function(){if(this.orderData.order_number){this.childAddColorBtn=!1;var e={pro_name:"",pro_item:1,pro_size:"",pro_color:"",pro_pack:"",pro_desc:"",pro_qt:0,pro_price:0,pro_weight:0,order_number:this.orderData.order_number,sub_ex_rate:this.orderData.ex_rate,sub_amount:0,status:1};this.subOrderData.push(e)}else this.$message.error("请完整填写订单信息!")},addSubOrderRow:function(e){this.childAddColorBtn=!1;var t={pro_name:"",pro_item:1,pro_size:"",pro_color:"",pro_pack:"",pro_desc:"",pro_qt:0,pro_price:0,pro_weight:0,order_number:this.orderData.order_number,sub_ex_rate:this.orderData.ex_rate,sub_amount:0,status:1};this.subOrderData.push(t)},editSubOrderRow:function(e){e.status=1},delProColor:function(e,t){var a="";this.subOrderData[t].pro_color.split("|").forEach((function(t,r){-1===t.indexOf(e)&&""!==t&&(a+=t+"|")})),this.subOrderData[t].pro_color=a},handleSelect:function(e,t){void 0===this.subOrderData[t].pro_color?this.subOrderData[t].pro_color=JSON.stringify(e)+"|":this.subOrderData[t].pro_color+=JSON.stringify(e)+"|"},subAmount:function(e){e.sub_amount=e.pro_price*e.pro_qt*1},selectTest:function(e){var t=this;!0===e&&Object(c["a"])().then((function(e){t.customerData=e.data}))},selectShipAddr:function(e){var t=this;!0===e&&Object(c["b"])().then((function(e){t.customerAddr=e.data.results}))},selectModel:function(){this.visible=!0,this.hideOrderTable()},onClose:function(){this.visible=!1,this.dialogVisible=!0}},created:function(){}},A=T,N=(a("9466"),Object(j["a"])(A,n,i,!1,null,"b6591896",null)),E=N.exports,V=a("6681"),K={components:{AddOrder:E,dateSearch:V["a"]},data:function(){return{tableData:[],sliceTableData:[],count:0,pagesize:10,page:1,input1:"",select:"",Options:[{value:0,label:"正常"},{value:1,label:"紧急"}],multipleSelection:[],search:"",loading:!0}},methods:{handleClick:function(e){this.$store.state.order_number=e.order_number,window.sessionStorage.setItem("order_number",e.order_number),this.$router.push("orders/".concat(e.order_number,"/"))},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["f"])(t.order_number,{is_delete:1}).then((function(r){a.tableData.splice(e,1),t.sub_orders.map((function(e){Object(m["h"])(e,{is_delete:1}).then((function(e){}))})),a.$message({type:"success",message:"删除成功!"})}))})).catch((function(){a.$message({type:"info",message:"删除失败!"})}))},handleSelectionChange:function(e){this.multipleSelection=e},dateSearchDate:function(e){var t=this;e?Object(m["b"])({start_date:e[0],end_date:e[1],argument:"order_date"}).then((function(e){t.tableData=e.data})):Object(m["b"])().then((function(e){t.tableData=e.data,t.count=e.data.length}))},handleSizeChange:function(e){this.pagesize=e,this.handlePage(this.page,e)},handleCurrentChange:function(e){this.page=e,this.handlePage(e,this.pagesize)},handlePage:function(e,t){var a=this.search;return a?this.tableData.filter((function(e){return Object.keys(e).some((function(t){return String(e[t]).toLowerCase().indexOf(a)>-1}))})).slice((e-1)*t,e*t*1):this.tableData.slice((e-1)*t,e*t*1)},showDate:function(e){return e+="",-1!==e.indexOf(this.search)&&""!==this.search?e.replace(this.search,'<font color="#ff4400">'+this.search+"</font>"):e},clearnSearchText:function(){this.search=null},getOrderList:function(){var e=this;Object(m["b"])().then((function(t){e.loading=!1,e.tableData=t.data.results,e.count=t.data.count})).catch((function(e){}))}},created:function(){this.getOrderList()}},B=K,q=Object(j["a"])(B,r,o,!1,null,"6312608f",null);t["default"]=q.exports},dbb4:function(e,t,a){var r=a("23e7"),o=a("83ab"),n=a("56ef"),i=a("fc6a"),s=a("06cf"),l=a("8418");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,a,r=i(e),o=s.f,c=n(r),d={},u=0;while(c.length>u)a=o(r,t=c[u++]),void 0!==a&&l(d,t,a);return d}})},e290:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-button",{attrs:{type:"primary"},on:{click:e.showDrawer}},[e._v("New Model")]),a("a-drawer",{attrs:{title:"Create New Model",visible:e.visible,width:"40%","body-style":{paddingBottom:"80px"},destroyOnClose:!0},on:{close:e.onClose}},[a("a-form-model",{ref:"addModelForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"supplier",prop:"supplier"}},[a("a-select",{attrs:{size:"default"},on:{dropdownVisibleChange:e.dropdownVisibleChange},model:{value:e.form.supplier,callback:function(t){e.$set(e.form,"supplier",t)},expression:"form.supplier"}},e._l(e.customers,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.lite_name}},[e._v(e._s(t.lite_name))])})),1)],1),a("a-form-model-item",{attrs:{label:"attribute",prop:"atr"}},[a("a-select",{attrs:{placeholder:"非必填项目"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("自有")]),a("a-select-option",{attrs:{value:"2"}},[e._v("工厂")]),a("a-select-option",{attrs:{value:"3"}},[e._v("样品")])],1)],1),a("a-form-model-item",{attrs:{label:"material",prop:"material"}},[a("a-select",{attrs:{placeholder:"非必填项目"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("铜模")]),a("a-select-option",{attrs:{value:"2"}},[e._v("钢模")])],1)],1),a("a-form-model-item",{attrs:{label:"size",prop:"size"}},[a("a-input",{attrs:{placeholder:"非必填项目"},model:{value:e.form.size,callback:function(t){e.$set(e.form,"size",t)},expression:"form.size"}})],1),a("a-form-model-item",{attrs:{label:"construct",prop:"construct"}},[a("a-input",{attrs:{placeholder:"非必填项目"},model:{value:e.form.construct,callback:function(t){e.$set(e.form,"construct",t)},expression:"form.construct"}})],1),a("a-form-model-item",{attrs:{label:"production date",prop:"pro_date"}},[a("a-date-picker",{model:{value:e.form.pro_date,callback:function(t){e.$set(e.form,"pro_date",t)},expression:"form.pro_date"}})],1),a("a-form-model-item",{attrs:{label:"useful life",prop:"useful_life"}},[a("a-input",{attrs:{placeholder:"非必填项目"},model:{value:e.form.useful_life,callback:function(t){e.$set(e.form,"useful_life",t)},expression:"form.useful_life"}})],1),a("a-form-model-item",{attrs:{label:"price",prop:"price"}},[a("a-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),a("a-form-model-item",{attrs:{label:"remarks",prop:"remarks"}},[a("a-input",{attrs:{type:"textarea"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),a("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Create")])],1)],1)],1)},o=[],n=(a("a9e3"),a("f6b0")),i=a("f8b7"),s={data:function(){return{visible:!1,labelCol:{span:4},wrapperCol:{span:14},customers:[],form:{supplier:"",atr:Number,material:Number,size:"",construct:"",pro_date:"",useful_life:"",price:"",remarks:""},rules:{supplier:[{required:!0,message:"Please select supplier",trigger:"change"}],pro_date:[{required:!0,message:"Please select date"}],price:[{required:!0,message:"Please input price"}]}}},methods:{dropdownVisibleChange:function(){var e=this;0===this.customers.length&&Object(n["a"])().then((function(t){e.customers=t.data})).catch((function(e){}))},submit:function(){var e=this;this.form.pro_date=this.form.pro_date.format("YYYY-MM-DD"),Object(i["j"])(this.form).then((function(t){e.$emit("getData"),e.$emit("getNewModelData",t.data),e.onClose(),e.$message.success("提交成功")})).catch((function(t){e.$message.error("提交失败,请重新录入"),e.onClose(),e.form={}}))},showDrawer:function(){this.visible=!0,this.$emit("hideOrderTable",!1)},onClose:function(){this.visible=!1,this.$emit("hideOrderTable",!0)}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,o,!1,null,null,null);t["a"]=d.exports},e439:function(e,t,a){var r=a("23e7"),o=a("d039"),n=a("fc6a"),i=a("06cf").f,s=a("83ab"),l=o((function(){i(1)})),c=!s||l;r({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(n(e),t)}})},ee20:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("add-model",{attrs:{hidden:e.selectingShow},on:{getData:e.getData}}),a("a-table",{attrs:{columns:e.columns,rowKey:"id","data-source":e.data,pagination:e.pagination,loading:e.loading,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},bordered:""},scopedSlots:e._u([e._l(["size","remarks","construct","material"],(function(t){return{key:t,fn:function(r,o,n){return[a("div",{key:t},[o.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:r},on:{change:function(a){return e.handleChange(a.target.value,n,t)}}}):[e._v(e._s(r))]],2)]}}})),{key:"atr",fn:function(t,r,o){return[a("div",{key:"atr"},[r.editable?a("a-select",{attrs:{"default-value":t},on:{select:e.handleSelect}},e._l(["自有","工厂","样品"],(function(t,r){return a("a-select-option",{key:r,attrs:{value:r}},[e._v(e._s(t))])})),1):[e._v(e._s(e._f("modelAttr")(t)))]],2)]}},{key:"material",fn:function(t,r,o){return[a("div",{key:"material"},[r.editable?a("a-select",{attrs:{"default-value":t},on:{select:e.handleSelectMaterial}},e._l(["铜模","钢模"],(function(t,r){return a("a-select-option",{key:r,attrs:{value:r}},[e._v(e._s(t))])})),1):[e._v(e._s(e._f("modelMaterial")(t)))]],2)]}},{key:"operation",fn:function(t,r,o){return[a("div",{staticClass:"editable-row-operations"},[r.editable?a("span",[a("a",{on:{click:function(){return e.save(r.id,o)}}},[e._v("Save")]),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return e.cancel(o,r)}}},[a("a",[e._v("Cancel")])])],1):a("span",[a("a",{attrs:{disabled:""!==e.editingKey},on:{click:function(){return e.edit(o)}}},[e._v("Edit")]),e.data.length?a("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return e.onDelete(r.id,o)}}},[a("a",{attrs:{href:"javascript:;"}},[e._v("Delete")])]):e._e()],1)])]}}],null,!0)})],1)},o=[],n=(a("a434"),a("2909")),i=a("5530"),s=a("f8b7"),l=a("e290"),c=[{title:"供应商",dataIndex:"supplier",width:"8%",scopedSlots:{customRender:"supplier"}},{title:"编号",dataIndex:"number",width:"10%",scopedSlots:{customRender:"number"}},{title:"属性",dataIndex:"atr",width:"5%",scopedSlots:{customRender:"atr"}},{title:"材质",dataIndex:"material",width:"5%",scopedSlots:{customRender:"material"}},{title:"尺寸",dataIndex:"size",width:"8%",scopedSlots:{customRender:"size"}},{title:"构造",dataIndex:"construct",width:"5%",scopedSlots:{customRender:"construct"}},{title:"生产日期",dataIndex:"pro_date",width:"10%",scopedSlots:{customRender:"pro_date"}},{title:"使用寿命",dataIndex:"useful_life",width:"8%",scopedSlots:{customRender:"useful_life"}},{title:"单价",dataIndex:"price",width:"8%",scopedSlots:{customRender:"price"}},{title:"备注",dataIndex:"remarks",width:"15%",scopedSlots:{customRender:"remarks"}},{title:"opration",dataIndex:"opration",scopedSlots:{customRender:"operation"}}],d={components:{addModel:l["a"]},props:{selectingShow:{type:Boolean,default:!1}},data:function(){return{data:[],pagination:{},loading:!1,editingKey:"",editingRow:0,selectedRowKeys:[],tableSelecting:!1,columns:c}},mounted:function(){this.getData()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{getData:function(){var e=this;this.loading=!0,Object(s["c"])().then((function(t){var a=Object(i["a"])({},e.pagination);a.total=t.data.count,e.loading=!1,e.data=t.data.results,e.pagination=a}))},handleChange:function(e,t,a){var r=Object(n["a"])(this.data),o=r[t];o&&(o[a]=e,this.data=r)},edit:function(e){var t=Object(n["a"])(this.data),a=t[e];a&&(a.editable=!0,this.editingRow=e,this.data=t)},save:function(e,t){var a=this,r=Object(n["a"])(this.data),o=r[t];o&&Object(s["g"])(e,o).then((function(e){o.editable=!1,a.data=r,a.$message.success("修改成功")})).catch((function(e){a.$message.error("修改失败")}))},cancel:function(e,t){this.getData()},onDelete:function(e,t){var a=this;Object(s["g"])(e,{is_delete:1}).then((function(e){a.data.splice(t,1),a.$message.success("删除成功")})).catch((function(e){a.$message.error("删除失败")}))},handleSelect:function(e){this.data[this.editingRow].atr=e},handleSelectMaterial:function(e){this.data[this.editingRow].material=e},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e}}},u=d,p=(a("b74f"),a("2877")),m=Object(p["a"])(u,r,o,!1,null,"5a92f3a9",null);t["a"]=m.exports},f6b0:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return d}));var r=a("6128"),o=a("4328"),n=a.n(o);function i(e){return Object(r["a"])({url:"customers/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:n.a.stringify(e)})}function s(e){return Object(r["a"])({url:"customers/",params:e})}function l(e){return Object(r["a"])({url:"customer_addr/",params:e})}function c(e){return Object(r["a"])({url:"customer_addr/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:n.a.stringify(e)})}function d(e,t){return Object(r["a"])({url:"customer_addr/".concat(e,"/"),method:"patch",data:n.a.stringify(t)})}},f8b7:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"i",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"l",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"g",(function(){return f})),a.d(t,"j",(function(){return b})),a.d(t,"d",(function(){return h})),a.d(t,"k",(function(){return _}));var r=a("6128"),o=a("4328"),n=a.n(o);function i(e){return Object(r["a"])({url:"orders/",params:e})}function s(e,t){return Object(r["a"])({url:"orders/".concat(e,"/"),params:t})}function l(e){return Object(r["a"])({url:"orders/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:n.a.stringify(e)})}function c(e,t){return Object(r["a"])({url:"orders/".concat(e,"/"),method:"patch",data:n.a.stringify(t)})}function d(e){return Object(r["a"])({url:"suborders/",params:e})}function u(e,t){return Object(r["a"])({url:"suborders/".concat(e,"/"),method:"patch",data:n.a.stringify(t)})}function p(e){return Object(r["a"])({url:"suborders/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:n.a.stringify(e)})}function m(e){return Object(r["a"])({url:"order_model/",params:e})}function f(e,t){return Object(r["a"])({url:"order_model/".concat(e,"/"),method:"patch",data:n.a.stringify(t)})}function b(e){return Object(r["a"])({url:"order_model/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:n.a.stringify(e)})}function h(e){return Object(r["a"])({url:"order_to_model/",params:e})}function _(e){return Object(r["a"])({url:"order_to_model/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:n.a.stringify(e)})}},fa1d:function(e,t,a){}}]);