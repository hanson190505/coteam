{% extends 'base.html' %}
{% load image %}
{% block title %}
  {{ product_detail.seo_title }}
{% endblock %}
{% block content %}
  <p></p>
	<div class="container">
    <nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="#">Home</a></li>
    <li class="breadcrumb-item"><a href="#">Library</a></li>
    <li class="breadcrumb-item active" aria-current="page">Data</li>
  </ol>
</nav>
  <div class="row">
    <div class="col-sm-12 col-md-6">
      <img src="{% image base_url product_detail.pro_image.first.path %}" class="card-img-top img-fluid img-thumbnail"
           alt="{{ product_detail.seo_title }}">
    </div>
    <div class="col-sm-12 col-md-6">
      <table class="product-tab">
        <tr>
          <td>Type:</td>
          <td>{{ product_detail.sub_type }}</td>
        </tr>
        <tr>
          <td>Name:</td>
          <td>{{ product_detail.pro_name }}</td>
        </tr>
        <tr>
          <td>Size:</td>
          <td>{{ product_detail.pro_size }}</td>
        </tr>
        <tr>
          <td>Weight:</td>
          <td>{{ product_detail.pro_weight }}g</td>
        </tr>
        <tr>
          <td>Pack:</td>
          <td>{{ product_detail.pro_pack }}</td>
        </tr>
        <tr>
          <td>Price:</td>
          <td>${{ product_detail.pro_price }}</td>
        </tr>
      </table>
      <button type="button" class="btn btn-primary btn-lg btn-block btn-sm" id="product-list-contact-btn"
                          data-target="#product-list-contact-modal" data-toggle="modal"
                          data-whatever="{{ web_base_url }}product/{{ product_detail.id }}">contact us
                  </button>
    </div>
  </div>
  <p></p>
  <div class="text-center">
    {{ product_detail.pro_desc | safe }}
  </div>
	</div>
   <div class="modal fade" tabindex="-1" role="dialog" id="product-list-contact-modal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          {% include 'webapi/contact.html' %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
{% block style %}
  <style>
    .product-tab td {
      padding-bottom: 0.5em;
      padding-right: 0.5em;
      font-size: 1.5em;
    }
  </style>
{% endblock %}
{% block script %}
  <script>
  $(function () {
          $('#product-list-contact-modal').on('show.bs.modal', function (event) {
              const button = $(event.relatedTarget) // Button that triggered the modal
              const recipient = button.data('whatever') // Extract info from data-* attributes
              $("#sendMailForm").submit(function () {
                  const title = $("#sendMailFormTitle:input").val()+'|'+ recipient
                  const name = $("#sendMailFormName:input").val()
                  const email = $("#sendMailFormEmail1:input").val()
                  const desc = $("#sendMailFormText").val()
                  $.ajax({
                      url: "/send_mail/",
                      type: "GET",
                      data: {title: title, name: name, email: email, desc: desc},
                      success: function (data) {
                          alert('Thank you')
                      },
                      statusCode: {
                          '429': function () {
                              alert('Please do not submit again. Wait for 1 minute and try again')
                          },
                          '500': function () {
                              alert('Failed to send,Please try again!')
                          }
                      }
                  })
                  return false;
              })
          })
      })
  </script>
{% endblock %}