{% extends 'base.html' %}
{% load image %}
{% block title %}
	{{ product_detail.seo_title }}
{% endblock %}
{% block meta %}
  <meta name="description" content="{{ product_detail.seo_desc }}">
{% endblock %}
{% block content %}
	<p></p>
	<div class="container">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="{% url 'products' %}">Products</a></li>
				<li class="breadcrumb-item active" aria-current="page">{{ product_detail.pro_number }}</li>
			</ol>
		</nav>
		<div class="row">
			<div class="col-sm-12 col-md-6">
{#				      <img src="{% image base_url product_detail.pro_image.last.path %}" class="img-fluid img-thumbnail"#}
{#				           alt="{{ product_detail.seo_title }}" height="100px">#}
				<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner">
						{% for p_image in product_detail.pro_image.iterator %}
							<div class="carousel-item">
								<img src="{% image base_url p_image.path %}" class="img-fluid" alt="{{ product_detail.seo_title }}">
							</div>
						{% endfor %}
					</div>
				</div>
				<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>
			<div class="col-sm-12 col-md-6">
{#      <p class="detail-title d-md-none d-xl-none">detail-title</p>#}
				<div class="pro-title bg-light">
					<h4>Product Detail</h4>
				</div>
				<ul class="list-group list-group-flush ">
					<li class="list-group-item"><strong class="float-left">Type:</strong><span class="float-right">{{ product_detail.sub_type }}</span></li>
					<li class="list-group-item"><strong class="float-left">Name:</strong>&nbsp;<span class="float-right">{{ product_detail.pro_name }}</span></li>
					<li class="list-group-item"><strong class="float-left">Material:</strong>&nbsp;<span class="float-right">{{ product_detail.material }}</span></li>
					<li class="list-group-item"><strong class="float-left">Item Size(inch):</strong>&nbsp;<span class="float-right">{{ product_detail.pro_size }}</span></li>
					<li class="list-group-item"><strong class="float-left">Weight(g):</strong>&nbsp;<span class="float-right">{{ product_detail.pro_weight }}</span></li>
					<li class="list-group-item"><strong class="float-left">Capacities:</strong>&nbsp;<span class="float-right">{{ product_detail.capacities }}</span></li>
					<li class="list-group-item"><strong class="float-left">StandardPack:</strong>&nbsp;<span class="float-right">{{ product_detail.pro_pack }}</span></li>
					<li class="list-group-item"><strong class="float-left">MOQ:</strong>&nbsp;<span class="float-right">{{ product_detail.moq }}</span></li>
					<li class="list-group-item"><strong class="float-left">Imprint Size:</strong>&nbsp;<span class="float-right">{{ product_detail.imprint_size }}</span></li>
					<li class="list-group-item"><strong class="float-left">Imprint Location:</strong>&nbsp;<span class="float-right">{{ product_detail.imprint_location }}</span></li>
					<li class="list-group-item"><strong class="float-left">Imprint Methods:</strong>&nbsp;<span class="float-right">{{ product_detail.imprint_methods }}</span></li>
					<li class="list-group-item">
						<strong class="float-left">Color:</strong>&nbsp;
						{% for color in color_list %}
						<button type="button" style="background-color: {{ color }}" class="btn pro-color float-right"></button>
					{% endfor %}
					</li>
        <li class="list-group-item"><strong>Price:</strong>&nbsp;<button type="button" class="btn btn-primary btn-sm float-right" id="product-list-contact-btn"
								data-target="#product-list-contact-modal" data-toggle="modal"
								data-whatever="{{ web_base_url }}product/{{ product_detail.id }}">contact us
				</button></li>
        <li class="list-group-item"><strong>Shipping instructions:</strong>
        <small>
Products are shipped from our Chinese factory, please choose the appropriate shipping method according to your timeliness requirements.
          We will choose DHL, UPS, FEDEX and other internationally renowned express companies, and the freight price will vary with each express company.
You can also appoint a courier company and use your own courier account.
        </small>
        </li>
				</ul>
			</div>
		</div>
		<p></p>
		<div>
			{{ product_detail.pro_desc | safe }}
		</div>
	</div>
	<div class="modal fade" tabindex="-1" role="dialog" id="product-list-contact-modal" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					{% include 'webapi/contact.html' %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block style %}
	<style>
      .product-tab td {
          padding-bottom: 0.5em;
          padding-right: 0.5em;
          font-size: 1em;
      }
			.pro-color{
					height: 2em;
					width: 2em;
			}
      .list-group-item{
          padding-bottom: 0;
          padding-top: 2px;
      }
	</style>
{% endblock %}
{% block script %}
	<script>
      $(function () {
          $('#product-list-contact-modal').on('show.bs.modal', function (event) {
              const button = $(event.relatedTarget) // Button that triggered the modal
              const recipient = button.data('whatever') // Extract info from data-* attributes
              $("#sendMailForm").submit(function () {
                  const title = $("#sendMailFormTitle:input").val() + '|' + recipient
                  const name = $("#sendMailFormName:input").val()
                  const email = $("#sendMailFormEmail1:input").val()
                  const desc = $("#sendMailFormText").val()
                  $.ajax({
                      url: "/send_mail/",
                      type: "GET",
                      data: {title: title, name: name, email: email, desc: desc},
                      success: function (data) {
                          alert('Thank you')
                      },
                      statusCode: {
                          '429': function () {
                              alert('Please do not submit again. Wait for 1 minute and try again')
                          },
                          '500': function () {
                              alert('Failed to send,Please try again!')
                          }
                      }
                  })
                  return false;
              })
          })
          $('.carousel-item:first').addClass('active')
      })
	</script>
{% endblock %}